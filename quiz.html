<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - What's Your Metaphysics?</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìñ</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- App Stats Logic -->
    <script src="js/firebase-config.js"></script>
    <script src="js/stats.js"></script>
</head>

<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <h1><a href="index.html" style="text-decoration: none; color: inherit;">What's Your Metaphysics?</a>
                </h1>
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Dark Mode">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </div>
            <p class="subtitle">Discover your philosophical worldview in <span class="dimension-count">...</span>
                dimensions.</p>
        </header>

        <main id="main-content">
            <div class="navigation-top">
                <a href="index.html" class="btn primary-btn"
                    style="display: inline-block; width: auto; margin-top: 0; margin-bottom: 2rem; text-decoration: none;">&larr;
                    Back to
                    Home</a>
            </div>
            <!-- Commitment View Template (Hidden initially) -->
            <div id="commitment-view" class="view hidden">
                <div class="card question-card">
                    <h2>Before we start...</h2>

                    <div class="commitment-section">
                        <h3>Quiz Mode</h3>
                        <div class="mode-toggle-container">
                            <span class="toggle-label label-standard active">Standard</span>
                            <label class="switch">
                                <input type="checkbox" id="commitment-expanded-mode-toggle">
                                <span class="slider round"></span>
                            </label>
                            <span class="toggle-label label-expanded">Expanded</span>
                        </div>
                        <p class="section-explanation">Choose <strong>Expanded</strong> mode for additional context and
                            explanations of metaphysical concepts. Recommended if you're less familiar with philosophy.</p>
                    </div>

                    <div class="commitment-section">
                        <h3>Your Commitment (Optional)</h3>
                        <p class="section-explanation">Do you already classify yourself as an adherent of a specific
                            metaphysical system? If so, select it below to see how well your quiz results match it.</p>

                        <div class="select-group">
                            <select id="commitment-select">
                                <option value="">Select your system...</option>
                                <!-- Options injected here -->
                            </select>
                        </div>
                    </div>

                    <div class="navigation-controls commitment-nav">
                        <button id="skip-commitment-btn" class="btn primary-btn">Skip</button>
                        <button id="confirm-commitment-btn" class="btn primary-btn hidden">Next &rarr;</button>
                    </div>
                </div>
            </div>

            <!-- Quiz View Template (Hidden initially, shown by JS) -->
            <div id="quiz-view" class="view hidden">
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="card question-card">
                    <div class="mode-toggle-container">
                        <span class="toggle-label label-standard active">Standard</span>
                        <label class="switch">
                            <input type="checkbox" id="expanded-mode-toggle">
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label label-expanded">Expanded</span>
                    </div>
                    <div class="dimension-label" id="dimension-label">Dimension 1: Ontology</div>
                    <h2 id="question-text">What is the fundamental "stuff" of the universe?</h2>
                    <div class="options-container" id="options-container">
                        <!-- Options injected here -->
                    </div>
                    <div class="navigation-controls">
                        <button id="back-btn" class="btn text-btn hidden">‚Üê Back</button>
                        <button id="next-btn" class="btn primary-btn hidden" style="width: auto; margin-top: 1rem;">Next
                            ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Results View Template (Hidden initially) -->
            <div id="results-view" class="view hidden">
                <div class="card result-card">
                    <div class="result-toggle-container hidden" id="result-toggle-container">
                        <button id="show-top-btn" class="toggle-btn active">Top Match</button>
                        <button id="show-runner-up-btn" class="toggle-btn">Runner-Up</button>
                        <button id="show-worst-btn" class="toggle-btn">Worst Match</button>
                        <button id="show-commitment-btn" class="toggle-btn hidden">Your Commitment</button>
                    </div>

                    <div class="result-header">
                        <span class="pre-title">Your Metaphysical System is:</span>
                        <h2 id="result-name">Stoicism</h2>
                        <div id="result-score" class="result-score"></div>
                    </div>

                    <div class="result-body">
                        <p id="result-description" class="result-description">Description goes here.</p>
                        <a id="result-wiki" href="#" target="_blank" class="wiki-link">Read more on Wikipedia &rarr;</a>

                        <div class="breakdown-section">
                            <h3>Your Dimensional Profile</h3>
                            <ul id="result-breakdown" class="breakdown-list">
                                <!-- Breakdown items injected here -->
                            </ul>
                        </div>

                        <div class="share-section">
                            <h3>Share Your Results</h3>
                            <div class="share-buttons">
                                <button id="share-twitter" class="share-btn twitter" aria-label="Share on X/Twitter">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="currentColor">
                                        <path
                                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                                    </svg>
                                    <span>X</span>
                                </button>
                                <button id="share-bluesky" class="share-btn bluesky" aria-label="Share on BlueSky">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="currentColor">
                                        <path
                                            d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.685-6.262 7.823-8.315 1.137 2.053 2.81 13.505 7.823 8.315 4.557-5.073 1.082-6.498-2.83-7.078-.139-.016-.277-.034-.415-.056.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.479 0-.689-.139-1.86-.902-2.203-.659-.299-1.664-.621-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z" />
                                    </svg>
                                    <span>BlueSky</span>
                                </button>
                                <button id="share-facebook" class="share-btn facebook" aria-label="Share on Facebook">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="currentColor">
                                        <path
                                            d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                                    </svg>
                                    <span>Facebook</span>
                                </button>
                                <button id="share-threads" class="share-btn threads" aria-label="Share on Threads">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="currentColor">
                                        <path
                                            d="M17.75 12.01c0 2.89-.96 5.69-4.28 5.69-3.08 0-5.18-2.18-5.18-5.7 0-3.66 2.22-6.02 5.56-6.02 3.29 0 4.96 2.23 5.17 4.94h2.24c-.21-3.95-2.71-6.94-7.41-6.94-4.87 0-8.35 3.38-8.35 8.02 0 4.5 3.32 7.78 8.12 7.78 2.66 0 4.88-1.03 5.86-3.23h.05v2.96h2.21v-7.5c0-2.73-1.93-4.14-4.32-4.14-2.28 0-3.92 1.34-3.92 3.63 0 2.05 1.55 3.18 3.25 3.18 1.54 0 2.45-1.09 2.45-2.86v-3.07h-1.93v2.92c0 .87-.55 1.39-1.32 1.39-.77 0-1.29-.55-1.29-1.42 0-1.04.75-1.63 1.63-1.63.58 0 1.05.21 1.41.51v-1.19c-.37-.25-.86-.39-1.41-.39-2.09 0-3.53 1.53-3.53 3.82 0 2.18 1.48 3.79 3.96 3.79 2.27 0 3.73-1.64 3.73-3.92v-1.04h1.93z" />
                                    </svg>
                                    <span>Threads</span>
                                </button>
                                <button id="share-linkedin" class="share-btn linkedin" aria-label="Share on LinkedIn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="currentColor">
                                        <path
                                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                                    </svg>
                                    <span>LinkedIn</span>
                                </button>
                                <button id="share-reddit" class="share-btn reddit" aria-label="Share on Reddit">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="currentColor">
                                        <path
                                            d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z" />
                                    </svg>
                                    <span>Reddit</span>
                                </button>
                                <button id="share-download" class="share-btn download"
                                    aria-label="Download Result Image">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                    <span>Download</span>
                                </button>
                                <button id="share-copy" class="share-btn copy-link" aria-label="Copy link">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                                    </svg>
                                    <span>Copy Link</span>
                                </button>
                            </div>
                        </div>

                        <a href="index.html" class="btn secondary-btn"
                            style="text-decoration: none; text-align: center;">Return Home</a>
                    </div>
                </div>
            </div>

            <!-- Hidden Share Banner Template -->
            <div id="share-banner" class="share-banner">
                <div class="banner-content">
                    <div class="banner-header">
                        <span class="banner-subtitle">My Metaphysical Worldview</span>
                        <h1 id="banner-system-name">System Name</h1>
                        <div id="banner-match-score" class="banner-score">95% Match</div>
                    </div>
                    <div class="banner-body">
                        <p id="banner-description">Description goes here.</p>
                    </div>
                    <div class="banner-footer">
                        <div class="banner-url">metaphysics-quiz.vercel.app</div>
                        <div class="banner-tagline">Discover your philosophy</div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Developed by Arthur Juliani | <a href="https://github.com/awjuliani/metaphysics-quiz"
                    target="_blank">View Source</a></p>
        </footer>
    </div>
    <script src="js/theme.js"></script>
    <script src="js/distance-calc.js"></script>
    <script src="js/data-loader.js"></script>
    <script src="js/quiz.js"></script>
</body>

</html>